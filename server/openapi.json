{
  "components": {
    "schemas": {
      "ContentConstruct": {
        "description": "Metadata about repository content with AI-generated summary",
        "properties": {
          "createdAt": {
            "description": "Timestamp when the content was created or processed",
            "example": "2023-01-20T08:45:12.789Z",
            "format": "date-time",
            "type": "string"
          },
          "id": {
            "description": "Unique identifier for the content item",
            "example": "commit-12a34bc5",
            "type": "string"
          },
          "summary": {
            "description": "AI-generated summary of the content",
            "example": "Fixed authentication bug in login controller",
            "type": "string"
          },
          "type": {
            "description": "Type of content (e.g., commit, pull request, issue)",
            "example": "commit",
            "type": "string"
          },
          "user": {
            "description": "GitHub username of the content author",
            "example": "johndoe",
            "type": "string"
          }
        },
        "required": ["createdAt", "id", "summary", "type", "user"],
        "type": "object"
      },
      "GitRepoInformationConstruct": {
        "description": "Repository information including metadata, questions, summaries, and contents",
        "properties": {
          "contents": {
            "description": "List of repository content metadata",
            "items": {
              "$ref": "#/components/schemas/ContentConstruct"
            },
            "type": "array"
          },
          "createdAt": {
            "description": "Timestamp when the repository was registered with the service",
            "example": "2023-01-15T14:30:45.123Z",
            "format": "date-time",
            "type": "string"
          },
          "isMaintainer": {
            "description": "Whether the requesting user has maintainer privileges",
            "example": true,
            "type": "boolean"
          },
          "questions": {
            "description": "List of questions and their answers related to this repository",
            "items": {
              "$ref": "#/components/schemas/QuestionConstruct"
            },
            "type": "array"
          },
          "repoLink": {
            "description": "URL to the GitHub repository",
            "example": "https://github.com/organization/repository",
            "type": "string"
          },
          "summaries": {
            "description": "List of AI-generated summaries of the repository content",
            "items": {
              "$ref": "#/components/schemas/SummaryConstruct"
            },
            "type": "array"
          }
        },
        "required": ["createdAt", "isMaintainer", "repoLink"],
        "type": "object"
      },
      "LinkConstruct": {
        "description": "Contains secure access links for developers and stakeholders",
        "properties": {
          "developerview": {
            "description": "URL for developer access to the repository",
            "example": "https://example.com/app/123e4567-e89b-12d3-a456-426614174000",
            "type": "string"
          },
          "stakeholderview": {
            "description": "URL for stakeholder access to the repository",
            "example": "https://example.com/app/123e4567-e89b-12d3-a456-426614174001",
            "type": "string"
          }
        },
        "required": ["developerview", "stakeholderview"],
        "type": "object"
      },
      "PATConstruct": {
        "description": "Request object containing GitHub Personal Access Token and repository information",
        "properties": {
          "pat": {
            "description": "GitHub Personal Access Token with repo scope",
            "example": "ghp_1234567890abcdefghijklmnopqrstuvwxyz",
            "type": "string"
          },
          "repolink": {
            "description": "URL to the GitHub repository",
            "example": "https://github.com/organization/repository",
            "type": "string"
          }
        },
        "required": ["pat", "repolink"],
        "type": "object"
      },
      "QuestionAnswerConstruct": {
        "description": "Answer provided by the AI for a user's question",
        "properties": {
          "answer": {
            "description": "The answer text generated by the AI",
            "example": "The system uses OAuth2 with JWT tokens for authentication",
            "type": "string"
          },
          "createdAt": {
            "description": "Timestamp when the answer was generated",
            "example": "2023-01-16T09:15:30.456Z",
            "format": "date-time",
            "type": "string"
          }
        },
        "required": ["answer", "createdAt"],
        "type": "object"
      },
      "QuestionConstruct": {
        "description": "Question submitted by a user with its answers",
        "properties": {
          "answers": {
            "description": "List of AI-generated answers to this question",
            "items": {
              "$ref": "#/components/schemas/QuestionAnswerConstruct"
            },
            "type": "array"
          },
          "createdAt": {
            "description": "Timestamp when the question was created",
            "example": "2023-01-15T16:45:22.789Z",
            "format": "date-time",
            "type": "string"
          },
          "question": {
            "description": "The question text submitted by the user",
            "example": "How does the authentication system work?",
            "type": "string"
          }
        },
        "required": ["createdAt", "question"],
        "type": "object"
      },
      "QuestionSubmission": {
        "description": "Request object for submitting a new question to be answered by the AI",
        "properties": {
          "question": {
            "description": "The question text to be processed by the AI",
            "example": "How does the authentication system work?",
            "maxLength": 500,
            "minLength": 5,
            "type": "string"
          }
        },
        "required": ["question"],
        "type": "object"
      },
      "SummaryConstruct": {
        "description": "AI-generated summary of repository content",
        "properties": {
          "createdAt": {
            "description": "Timestamp when the summary was generated",
            "example": "2023-01-18T10:15:30.123Z",
            "format": "date-time",
            "type": "string"
          },
          "id": {
            "description": "Unique identifier for the summary",
            "example": 42,
            "format": "int64",
            "type": "integer"
          },
          "summary": {
            "description": "Text content of the AI-generated summary",
            "example": "This repository implements a RESTful API for user authentication using Spring Security",
            "type": "string"
          }
        },
        "required": ["createdAt", "id", "summary"],
        "type": "object"
      }
    }
  },
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "openapi": "3.1.0",
  "paths": {
    "/api/repositories/{usercode}": {
      "get": {
        "description": "Auth is handled via the provided UUID",
        "operationId": "getGitRepository",
        "parameters": [
          {
            "description": "UUID access token for repository authentication",
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "in": "path",
            "name": "usercode",
            "required": true,
            "schema": {
              "description": "UUID access token for repository authentication",
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": {
                  "contents": [],
                  "createdAt": "2023-01-15T14:30:45.123Z",
                  "isMaintainer": true,
                  "questions": [
                    {
                      "answer": {
                        "answer": "The system uses OAuth2 with JWT tokens",
                        "createdAt": "2023-01-16T09:15:30.456Z"
                      },
                      "createdAt": "2023-01-15T16:45:22.789Z",
                      "id": "550e8400-e29b-41d4-a716-446655440000",
                      "question": "How does the authentication system work?"
                    }
                  ],
                  "repoLink": "https://github.com/organization/repository",
                  "summaries": []
                },
                "schema": {
                  "$ref": "#/components/schemas/GitRepoInformationConstruct",
                  "description": "Complete repository information with related metadata",
                  "required": ["createdAt", "isMaintainer", "repoLink"]
                }
              }
            },
            "description": "Repository information including questions, summaries, and contents"
          },
          "403": {
            "content": {
              "application/json": {
                "example": {
                  "error": "Invalid access token"
                },
                "schema": {
                  "description": "Error message",
                  "type": "string"
                }
              }
            },
            "description": "Forbidden - Requested UUID access token does not exist"
          }
        },
        "summary": "Get the git repository information",
        "tags": ["git-repo-controller"]
      }
    },
    "/api/repositories/{usercode}/question": {
      "post": {
        "operationId": "createQuestion",
        "parameters": [
          {
            "description": "UUID access token for repository authentication",
            "example": "123e4567-e89b-12d3-a456-426614174000",
            "in": "path",
            "name": "usercode",
            "required": true,
            "schema": {
              "description": "UUID access token for repository authentication",
              "example": "123e4567-e89b-12d3-a456-426614174000",
              "format": "uuid",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "question": "Why are these developer raving about 42?"
              },
              "schema": {
                "$ref": "#/components/schemas/QuestionSubmission"
              }
            }
          },
          "description": "Question to create",
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": {
                  "message": "Created Successfully"
                },
                "schema": {
                  "description": "Success confirmation message",
                  "example": "Created Successfully",
                  "type": "string"
                }
              }
            },
            "description": "Question successfully submitted for AI processing"
          },
          "403": {
            "content": {
              "application/json": {
                "example": {
                  "error": "Invalid access token"
                },
                "schema": {
                  "description": "Error message",
                  "type": "string"
                }
              }
            },
            "description": "Forbidden - Requested UUID access token does not exist"
          }
        },
        "summary": "Create a question to be answered asynchronously by the AI service",
        "tags": ["git-repo-controller"]
      }
    },
    "/api/repositories/PAT": {
      "post": {
        "operationId": "createFromPAT",
        "requestBody": {
          "content": {
            "application/json": {
              "example": {
                "personalAccessToken": "ghp_1234567890abcdefghijklmnopqrstuvwxyz",
                "repoLink": "https://github.com/organization/repository"
              },
              "schema": {
                "$ref": "#/components/schemas/PATConstruct"
              }
            }
          },
          "description": "Personal Access Token for GitHub repository",
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "example": {
                  "developerview": "https://example.com/app/123e4567-e89b-12d3-a456-426614174000",
                  "stakeholderview": "https://example.com/app/123e4567-e89b-12d3-a456-426614174001"
                },
                "schema": {
                  "$ref": "#/components/schemas/LinkConstruct",
                  "description": "Contains developer and stakeholder access links",
                  "required": ["developerview", "stakeholderview"]
                }
              }
            },
            "description": "Secure maintainer and developer access links successfully generated"
          },
          "403": {
            "content": {
              "application/json": {
                "example": {
                  "error": "Invalid personal access token"
                },
                "schema": {
                  "description": "Error message",
                  "type": "string"
                }
              }
            },
            "description": "Forbidden - Invalid personal access token provided"
          }
        },
        "summary": "Provide the personal access token to retrieve the secure maintainer and developer links",
        "tags": ["git-repo-controller"]
      }
    }
  },
  "servers": [
    {
      "description": "Generated server url",
      "url": "http://localhost:8080"
    }
  ]
}
